@if (vm(); as vm) {
    <div *transloco="let t">
        <button (click)="addAreaData()">Add</button>
        <app-card-group>
            <div>
                {{ t(vm.targetAreaSizeHeaderKey) }}
            </div>
            <div>
                {{ t(vm.entryPointHeaderKey) }}
            </div>
            <div>{{ t(vm.doseHeaderKey) }}</div>
            <div>{{ t(vm.applicationDateHeaderKey) }}</div>
            <div>{{ t(vm.trichogrammaRequirementHeaderKey) }}</div>
            <div>{{ t(vm.distanceFromHeadOfficeHeaderKey) }}</div>
            <div>{{ t(vm.actionsHeaderKey) }}</div>

            @for (area of xAreaData$() | async; track $index) {
                <app-card-item
                    class="p-3 xl:p-0 grid xl:grid-cols-subgrid xl:col-span-full grid-cols-[2fr_1fr] rounded-lg xl:rounded-none duration-500 transition-all bg-gray-100"
                >
                    <app-key-value [label]="vm.targetAreaSizeHeaderKey">
                        {{
                            t(vm.targetAreaSizeValueKey, {
                                count: area.targetAreaSize,
                            })
                        }}
                    </app-key-value>
                    <app-key-value [label]="vm.entryPointHeaderKey">
                        {{ area.entryPointAddress }}
                        {{
                            t(vm.entryPointValueKey, {
                                count: area.entryPointAddress,
                            })
                        }}
                    </app-key-value>
                    <app-key-value [label]="vm.doseHeaderKey">
                        {{
                            t(vm.doseValueKey, {
                                count: area.dosePerHq,
                            })
                        }}
                    </app-key-value>
                    <app-key-value [label]="vm.applicationDateHeaderKey">
                        {{
                            t(vm.applicationDateValueKey, {
                                applicationDate: area.applicationDate,
                            })
                        }}
                    </app-key-value>
                    <app-key-value
                        [label]="vm.trichogrammaRequirementHeaderKey"
                    >
                        {{
                            t(vm.trichogrammaRequirementValueKey, {
                                count: area.trichogrammaRequirement,
                            })
                        }}
                    </app-key-value>
                    <app-key-value [label]="vm.distanceFromHeadOfficeHeaderKey">
                        {{
                            t(vm.distanceFromHeadOfficeValueKey, {
                                count: area.distanceFromHeadOffice,
                            })
                        }}
                    </app-key-value>
                    <button
                        mat-icon-button
                        class="bg-blue-600 hover:bg-blue-500 text-white h-11 w-11 items-center justify-center text-center rounded-full inline-flex"
                        (click)="editAreaData(area.id)"
                    >
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button
                        mat-icon-button
                        class="bg-red-600 hover:bg-red-500 text-white h-11 w-11 items-center justify-center text-center rounded-full inline-flex"
                        (click)="deleteAreaData(area.id)"
                    >
                        <mat-icon>delete</mat-icon>
                    </button>
                </app-card-item>
            }
        </app-card-group>
        @let totalAreaData = totalAreaXData$() | async;
        @if (totalAreaData) {
            <table class="w-full border rounded-lg mt-10">
                <thead class="bg-gray-200">
                    <tr class="text-left text-gray-700 font-semibold">
                        <th class="border">
                            {{ t(vm.totalTargetAreaSizeHeaderKey) }}
                        </th>
                        <th class="border">
                            {{ t(vm.totalTrichogrammaRequirementHeaderKey) }}
                        </th>
                        <th class="border">
                            {{ t(vm.totalDistanceFromHeadOfficeHeaderKey) }}
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="odd:bg-white even:bg-gray-100">
                        <td
                            class="border"
                            [transloco]="vm.targetAreaSizeValueKey"
                            [translocoParams]="{
                                count: totalAreaData.totalTargetAreaSize,
                            }"
                        ></td>
                        <td
                            class="border"
                            [transloco]="vm.trichogrammaRequirementValueKey"
                            [translocoParams]="{
                                count: totalAreaData.totalTrichogrammaRequirement,
                            }"
                        ></td>
                        <td
                            class="border"
                            [transloco]="vm.distanceFromHeadOfficeValueKey"
                            [translocoParams]="{
                                count: totalAreaData.totalDistanceFromHeadOffice,
                            }"
                        ></td>
                    </tr>
                </tbody>
            </table>
        }
    </div>
}
